# Maintainer: Łukasz Buśko <lukasz.busko@guns4hire.cc>

pkgname=tongfang-keyboard-control-git
pkgver=0.1
pkgrel=1
arch=('x86_64')

depends=('rust'
)
makedepends=('git' 'udev' 'systemd')

#source=("git+https://github.com/str0g/tongfang-keyboard-control-git")
source=("git+file:///home/lukasz/repos/g4h/drivers/tongfang-keyboard-control")
#source=("git+file:///home/<user>/<path>/tongfang-keyboard-control")
sha256sums=('SKIP')

pkgdesc="tongfang keyboard control utility"
license=('MPL')
install=hook.install

build() {
  cd $srcdir/tongfang-keyboard-control
  cargo build --release
}

package() {
  currnet_srcdir="$srcdir/tongfang-keyboard-control"
  install -dm755 "$pkgdir/usr/bin"
  install -Dm755 "$currnet_srcdir/target/release/tongfang-keyboard-control" "$pkgdir/usr/bin/"
  #
  install -dm755 "$pkgdir/usr/lib/systemd/system"
  install -Dm644 "$currnet_srcdir/examples/tongfang-keyboard-control.service" "$pkgdir/usr/lib/systemd/system/"
  #
  install -dm755 "$pkgdir/etc/udev/rules.d"
  install -Dm644 "$currnet_srcdir/examples/99-keyboard.rules" "$pkgdir/etc/udev/rules.d/"
}
